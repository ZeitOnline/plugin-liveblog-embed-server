liveblog.define("plugins",{}),liveblog.define("lib/helpers/twitter",[],function(){var t={link:{anchor:function(t){return t.replace(/[äéöüßÄÖÜA-Za-z]+:\/\/[äéöüßÄÖÜA-Za-z0-9-_]+\.[äéöüßÄÖÜA-Za-z0-9-_:%&\?\/.=]+/g,function(t){return t=t.link(t),t=t.replace('href="','target="_blanka" href="')})},user:function(t){return t.replace(/[@]+[äéöüßÄÖÜA-Za-z0-9-_]+/g,function(t){var e=t.replace("@","");return t=t.link("http://twitter.com/"+e),t=t.replace('href="','target="_blankb" onclick="loadProfile(\''+e+'\');return(false);"  href="')})},tag:function(t){return t.replace(/[#]+[äéöüßÄÖÜA-Za-z0-9-_]+/g,function(t){var e=t.replace("#","%23");return t=t.link("http://twitter.com/search?q="+e),t=t.replace('href="','target="_blank" href="')})},all:function(t){return t=this.anchor(t),t=this.user(t),t=this.tag(t)}}};return t}),liveblog.define("plugins/wrappup-toggle",["backbone","underscore","plugins","lib/utils","dust"],function(t,e,n,i){var r={hide:"slideUp",show:"slideDown"};i.isClient&&i.dispatcher.once("initialize.posts-view",function(t){t.clientEvents({'click [data-gimme="post.wrapup"]':"wrapupToggle"}),t.wrapupToggle=function(e){var n=t.$(e.target).closest('[data-gimme="post.wrapup"]'),i=n.attr("data-wrapup-open");n.hasClass(i)?(n.removeClass(i),n.nextUntil('[data-gimme="post.wrapup"],[data-gimme="posts.nextPage"]')[r.hide]()):(n.addClass(i),n.nextUntil('[data-gimme="post.wrapup"],[data-gimme="posts.nextPage"]')[r.show]())}})}),liveblog.define("lib/helpers/visibility-toggle",[],function(){var t=function(t,e){var n="";return n=void 0!==e?e?"visible":"hidden":"visible"===t.css("visibility")?"hidden":"visible",t.css("visibility",n),"visible"===n?!0:!1};return t}),liveblog.define("tmpl!themeBase/plugins/permanent-link",["dust"],function(t){return function(){function e(t){return t.write('<a data-gimme="post.permalink" href="#" rel="bookmark" class="permalink">#</a><input data-gimme="post.share-permalink" type="text" style="visibility:hidden; z-index: 9000" value="">')}return t.register("themeBase/plugins/permanent-link",e),e}(),{render:function(e,n){return t.render("themeBase/plugins/permanent-link",e,n)}}}),liveblog.define("plugins/permanent-link",["plugins","lib/utils","dust","lib/helpers/visibility-toggle","tmpl!themeBase/item/base","tmpl!themeBase/plugins/permanent-link"],function(t,e,n,i){return e.isClient?(t.permalink=function(){e.dispatcher.on("after-render.post-view",function(t){n.renderThemed("themeBase/plugins/permanent-link",{},function(e,n){t.$('[data-gimme="post.permanent-link-placeholder"]').html(n)});var e="";t.permalink&&"function"==typeof t.permalink&&(e=t.permalink(),t.$('[data-gimme="post.share-permalink"]').val(e),t.$('[data-gimme="post.permalink"]').attr("href",e))}),e.dispatcher.on("initialize.post-view",function(t){t.clientEvents({'click [data-gimme="post.permalink"]':"permalinkAction"}),t.permalinkAction=function(t){t.preventDefault();var e=this.$(t.target).siblings('[data-gimme="post.share-permalink"]');if(i(e)){var n=this.$('[data-gimme^="post.share"][data-gimme!="post.share-permalink"]');i(n,!1),e.trigger("focus")}},t.clientEvents({'click [data-gimme="post.share-permalink"]':"permalinkInput",'focus [data-gimme="post.share-permalink"]':"permalinkInput"}),t.permalinkInput=function(e){t.$(e.target).select()},t.delegateEvents()})},t.permalink):void 0}),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;!function(t,e){return"function"==typeof liveblog.define&&liveblog.define.amd?liveblog.define("waypoints",["jquery"],function(n){return e(n,t)}):e(t.jQuery,t)}(window,function(n,i){var r,o,l,s,a,u,c,f,h,p,d,m,g,v,w,b;return r=n(i),f=t.call(i,"ontouchstart")>=0,s={horizontal:{},vertical:{}},a=1,c={},u="waypoints-context-id",d="resize.waypoints",m="scroll.waypoints",g=1,v="waypoints-waypoint-ids",w="waypoint",b="waypoints",o=function(){function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+a++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[u]=this.id,c[this.id]=this,t.bind(m,function(){var t;return e.didScroll||f?void 0:(e.didScroll=!0,t=function(){return e.doScroll(),e.didScroll=!1},i.setTimeout(t,n[b].settings.scrollThrottle))}),t.bind(d,function(){var t;return e.didResize?void 0:(e.didResize=!0,t=function(){return n[b]("refresh"),e.didResize=!1},i.setTimeout(t,n[b].settings.resizeThrottle))})}return t.prototype.doScroll=function(){var t,e=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!f||t.vertical.oldScroll&&t.vertical.newScroll||n[b]("refresh"),n.each(t,function(t,i){var r,o,l;return l=[],o=i.newScroll>i.oldScroll,r=o?i.forward:i.backward,n.each(e.waypoints[t],function(t,e){var n,r;return i.oldScroll<(n=e.offset)&&n<=i.newScroll?l.push(e):i.newScroll<(r=e.offset)&&r<=i.oldScroll?l.push(e):void 0}),l.sort(function(t,e){return t.offset-e.offset}),o||l.reverse(),n.each(l,function(t,e){return e.options.continuous||t===l.length-1?e.trigger([r]):void 0})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,e,i,r=this;return i=n.isWindow(this.element),e=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:i?0:e.left,contextScroll:i?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:i?0:e.top,contextScroll:i?0:this.oldScroll.y,contextDimension:i?n[b]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},n.each(t,function(t,e){return n.each(r.waypoints[t],function(t,i){var r,o,l,s,a;return r=i.options.offset,l=i.offset,o=n.isWindow(i.element)?0:i.$element.offset()[e.offsetProp],n.isFunction(r)?r=r.apply(i.element):"string"==typeof r&&(r=parseFloat(r),i.options.offset.indexOf("%")>-1&&(r=Math.ceil(e.contextDimension*r/100))),i.offset=o-e.contextOffset+e.contextScroll-r,i.options.onlyOnScroll&&null!=l||!i.enabled?void 0:null!==l&&l<(s=e.oldScroll)&&s<=i.offset?i.trigger([e.backward]):null!==l&&l>(a=e.oldScroll)&&a>=i.offset?i.trigger([e.forward]):null===l&&e.oldScroll>=i.offset?i.trigger([e.forward]):void 0})})},t.prototype.checkEmpty=function(){return n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([d,m].join(" ")),delete c[this.id]):void 0},t}(),l=function(){function t(t,e,i){var r,o;"bottom-in-view"===i.offset&&(i.offset=function(){var t;return t=n[b]("viewportHeight"),n.isWindow(e.element)||(t=e.$element.height()),t-n(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=i.horizontal?"horizontal":"vertical",this.callback=i.handler,this.context=e,this.enabled=i.enabled,this.id="waypoints"+g++,this.offset=null,this.options=i,e.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,r=null!=(o=this.element[v])?o:[],r.push(this.id),this.element[v]=r}return t.prototype.trigger=function(t){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var e,i;return(i=t[v])?(e=n.extend({},s.horizontal,s.vertical),n.map(i,function(t){return e[t]})):[]},t}(),p={init:function(t,e){var i;return e=n.extend({},n.fn[w].defaults,e),null==(i=e.handler)&&(e.handler=t),this.each(function(){var t,i,r,s;return t=n(this),r=null!=(s=e.context)?s:n.fn[w].defaults.context,n.isWindow(r)||(r=t.closest(r)),r=n(r),i=c[r[0][u]],i||(i=new o(r)),new l(t,i,e)}),n[b]("refresh"),this},disable:function(){return p._invoke.call(this,"disable")},enable:function(){return p._invoke.call(this,"enable")},destroy:function(){return p._invoke.call(this,"destroy")},prev:function(t,e){return p._traverse.call(this,t,e,function(t,e,n){return e>0?t.push(n[e-1]):void 0})},next:function(t,e){return p._traverse.call(this,t,e,function(t,e,n){return e<n.length-1?t.push(n[e+1]):void 0})},_traverse:function(t,e,r){var o,l;return null==t&&(t="vertical"),null==e&&(e=i),l=h.aggregate(e),o=[],this.each(function(){var e;return e=n.inArray(this,l[t]),r(o,e,l[t])}),this.pushStack(o)},_invoke:function(t){return this.each(function(){var e;return e=l.getWaypointsByElement(this),n.each(e,function(e,n){return n[t](),!0})}),this}},n.fn[w]=function(){var t,i;return i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],p[i]?p[i].apply(this,t):n.isFunction(i)?p.init.apply(this,arguments):n.isPlainObject(i)?p.init.apply(this,[null,i]):n.error(i?"The "+i+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},n.fn[w].defaults={context:i,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return n.each(c,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=i.innerHeight)?t:r.height()},aggregate:function(t){var e,i,r;return e=s,t&&(e=null!=(r=c[n(t)[0][u]])?r.waypoints:void 0),e?(i={horizontal:[],vertical:[]},n.each(i,function(t,r){return n.each(e[t],function(t,e){return r.push(e)}),r.sort(function(t,e){return t.offset-e.offset}),i[t]=n.map(r,function(t){return t.element}),i[t]=n.unique(i[t])}),i):[]},above:function(t){return null==t&&(t=i),h._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return null==t&&(t=i),h._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return null==t&&(t=i),h._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return null==t&&(t=i),h._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(t,e){return p[t]=e},_invoke:function(t){var e;return e=n.extend({},s.vertical,s.horizontal),n.each(e,function(e,n){return n[t](),!0})},_filter:function(t,e,i){var r,o;return(r=c[n(t)[0][u]])?(o=[],n.each(r.waypoints[e],function(t,e){return i(r,e)?o.push(e):void 0}),o.sort(function(t,e){return t.offset-e.offset}),n.map(o,function(t){return t.element})):[]}},n[b]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],h[n]?h[n].apply(null,t):h.aggregate.call(null,n)},n[b].settings={resizeThrottle:100,scrollThrottle:30},r.on("load.waypoints",function(){return n[b]("refresh")})})}.call(this),liveblog.require.config({paths:{twitterWidgets:"//platform.twitter.com/widgets"},shim:{twitterWidgets:{exports:"twttr"}}}),liveblog.define("plugins/twitter-widgets",["underscore","backbone","plugins","dust","lib/utils"],function(t,e,n,i,r){return n["twitter-widgets"]=function(){if(r.isClient){r.dispatcher.on("before-render.post-view",function(t){"source/twitter"===t.model.get("item")&&(t.parentView()._twitterPosts||(t.parentView()._twitterPosts=[]),t.parentView()._twitterPosts.push(t))}),r.dispatcher.on("add-all.posts-view",function(t){e(t)});var e=function(e){e._twitterPosts&&liveblog.require(["twitterWidgets","waypoints"],function(n){n.ready(function(){t.each(e._twitterPosts,function(t){t.$el.waypoint(function(){var e=t.model.get("Meta").id_str;n.widgets.createTweet(e,t.$el.find(".post-content-full").get(0),function(){t.$el.find(".post-core-content").remove()},{cards:"all"})},{triggerOnce:!0,offset:"120%",context:e.el})}),e._twitterPosts=[]})},function(){})}}},n["twitter-widgets"]}),liveblog.define("tmpl!theme/container",["dust"],function(t){return function(){function e(t,e){return e=e.shiftBlocks(a),t.partial("themeBase/container",e,null)}function n(t,e){return e=e.shiftBlocks(a),t}function i(t,e){return e=e.shiftBlocks(a),t}function r(t,e){return e=e.shiftBlocks(a),t.block(e.getBlock("status"),e,{block:o},null).block(e.getBlock("statusNewPost"),e,{block:l},null)}function o(t,e){return e=e.shiftBlocks(a),t}function l(t,e){return e=e.shiftBlocks(a),t}function s(t,e){return e=e.shiftBlocks(a),t}t.register("theme/container",e);var a={headerContainer:n,userComment:i,contentTop:r,contentBottom:s};return e}(),{render:function(e,n){return t.render("theme/container",e,n)}}}),liveblog.define("tmpl!theme/item/base",["dust"],function(t){return function(){function e(t,e){return t.partial("themeBase/item/base",e,null)}return t.register("theme/item/base",e),e}(),{render:function(e,n){return t.render("theme/item/base",e,n)}}}),liveblog.define("themeFile",["plugins/wrappup-toggle","plugins/permanent-link","plugins/twitter-widgets","tmpl!theme/container","tmpl!theme/item/base","css!theme/liveblog"],function(){return{plugins:["wrappup-toggle","permanent-link","twitter-widgets"]}});